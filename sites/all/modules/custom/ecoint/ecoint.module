<?php
/**
 * @file
 * Code for the EcoInt feature.
 */

include_once 'ecoint.features.inc';

function ecoint_apachesolr_index_document_build(ApacheSolrDocument $document, $entity, $entity_type, $env_id) {
  if($entity_type == 'node' && $entity->type == 'ecological_interactions'){
    $extra_taxonomic_name_field = field_collection_item_load($entity->field_int_collection['und'][0]['value']);
    $extra_taxonomic_name_field = $extra_taxonomic_name_field->field_taxonomic_name['und'][0]['taxonomy_term'];
    $document->addField('im_field_taxonomic_name', $extra_taxonomic_name_field->tid);
  }
}

/**
 * Implementation of hook_theme().
 */
function ecoint_theme(){
  return array(
      'ecoint_search' => array(
          'variables' => array(
              'results' => NULL,
              'module' => NULL
          ),
          'file' => 'ecoint.theme.inc'
      ),
      'ecoint_search_empty' => array(
          'variables' => array(),
          'file' => 'ecoint.theme.inc'
      )
  );
}


/**
 * Implementation of hook_scratchpads_solr_info().
 */
function ecoint_scratchpads_solr_info(){
  return array(
      'biblio' => array(
          'theme' => 'ecoint_search',
          'empty' => 'ecoint_search_empty'
      )
  );
}
